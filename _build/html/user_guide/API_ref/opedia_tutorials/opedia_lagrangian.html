


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    
        <title>Lagrangian Sampling &mdash; CMAP</title>
    


  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/style.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/CMAP_logo.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Eddy Sampling" href="opedia_eddy.html" />
    <link rel="prev" title="Colocalize Cruise" href="opedia_cruise_track.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Simons CMAP
          

          
            
            <img src="../../../_static/CMAP_logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../catalog/catalog.html">Data Catalog</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_ref.html">Software Packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../pycmap_api/pycmap_api_ref.html">pycmap API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cmap4r_api/cmap4r_api.html">cmap4r API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matcmap_api/matcmap_api_ref.html">matcmap API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../juliacmap_api/juliacmap_api_ref.html">juliacmap API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="opedia_tutorials.html">opedia (depreciated)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="opedia_get_catalog.html">Retrieve Data Catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_regional_map_gridded.html">Map Gridded Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_regional_map_sparse.html">Map Sparse Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_section.html">Section Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_time_series.html">Plot Time Series</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_depth_profile.html">Plot Depth Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_XY.html">Plot XY</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_histogram.html">Plot Histogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_ESV.html">Exact Amplicon Sequence Variants</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_section.html">Section Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_cruise_track.html">Colocalize Cruise</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Lagrangian Sampling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#code-tutorial">Code Tutorial</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="opedia_eddy.html">Eddy Sampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_front.html">Front Sampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_custom_data.html">Colocalize Custom Dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_retrieve_data.html">Retrieve Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="opedia_sql.html">SQL Queries</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">FAQ and Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../faq_and_contributing/datasubmission.html">Data Submission</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq_and_contributing/file_structure.html">Simons CMAP Data Submission: <br/> File Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq_and_contributing/FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq_and_contributing/contact.html">Contact and Contribute</a></li>
</ul>

            
          

    
        <p class="caption">
            <span class="caption-text">
            
                Outside Resources
            
            </span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://simonscmap.com/"><i class="fa fa-globe fa-fw"></i> Simons CMAP Web Application</a></li>
            
                <li class="toctree-l1"><a href="https://simonscmap.com/catalog"><i class="fa fa-archive fa-fw"></i> Interactive Data Catalog</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/simonscmap"><i class="fa fa-github fa-fw"></i> Project Source Code</a></li>
            
                <li class="toctree-l1"><a href="https://join.slack.com/t/simons-cmap/shared_invite/enQtNjQzMTkzMjg0NjQ2LTdlOGRhZjNhMDY3MjRlNjg2OTY5NzE3ZWZhNWE0OWZhYmQzMTJjNDkyNDQ1MjNkZDg0N2MzMzhlZDliNGYxYzQ"><i class="fa fa-slack fa-fw"></i> Slack</a></li>
            
        </ul>
    

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Simons CMAP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../api_ref.html">Software Packages</a> &raquo;</li>
        
          <li><a href="opedia_tutorials.html">opedia (depreciated)</a> &raquo;</li>
        
      <li>Lagrangian Sampling</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="lagrangian-sampling">
<h1>Lagrangian Sampling<a class="headerlink" href="#lagrangian-sampling" title="Permalink to this headline">¶</a></h1>
<div class="section" id="code-tutorial">
<h2>Code Tutorial<a class="headerlink" href="#code-tutorial" title="Permalink to this headline">¶</a></h2>
<p><strong>Colocalize a Lagrangian path with model and satellite data</strong></p>
<p>As far as oceanic observation methodology is concerned, one can consider two major class of observations:</p>
<ul class="simple">
<li><p>Eulerian</p></li>
<li><p>Lagrangian</p></li>
</ul>
<p>Eulerian measurements are made at a fixed frame of reference which means the sensor is fixed at a given location and fluid is passing by. Lagrangian measurements are made from the perspective of water parcels which means the sensor propagates with the flow. This example demonstrates how to advect a passive tracer (massless particle) with the flow and construct a Lagrangian path. We then colocalize the Lagrangian path with other data sets (SST satellite and model-generated diazotroph concentration) to simulate a Lagrangian measurement.</p>
<p>Notes:</p>
<ul class="simple">
<li><p>Darwin_Climatology is a monthly climatology version of the Darwin model with spatial resolution 1/2° X 1/2°</p></li>
<li><p>Satellite SST data set is a daily-global product with spatial resolution  1/4° X 1/4° .</p></li>
</ul>
<p><a class="reference external" href="https://github.com/mdashkezari/opedia/blob/master/notebooks/SimpleExamples.ipynb">Jupyter</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">opedia</span> <span class="kn">import</span> <span class="n">Lagrangian</span> <span class="k">as</span> <span class="n">LAG</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span>
<span class="n">dt</span> <span class="o">=</span> <span class="mi">24</span><span class="o">*</span><span class="mi">3600</span>                                                          <span class="c1"># propagation time step (day seconds)</span>
<span class="n">direction</span> <span class="o">=</span> <span class="mi">1</span>                                                         <span class="c1"># propagation direction (forward/backward in time  &lt;1&gt; / &lt;-1&gt;)</span>
<span class="n">startDate</span> <span class="o">=</span> <span class="s1">&#39;2016-01-01&#39;</span>                                              <span class="c1"># propagation start date</span>
<span class="n">endDate</span> <span class="o">=</span> <span class="s1">&#39;2016-02-01&#39;</span>                                                <span class="c1"># propagation end date</span>
<span class="n">lat0</span> <span class="o">=</span> <span class="mi">36</span>                                                             <span class="c1"># starting poin latitude</span>
<span class="n">lon0</span> <span class="o">=</span> <span class="o">-</span><span class="mi">73</span>                                                            <span class="c1"># starting poin longitude</span>
<span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;Tracer&#39;</span>                                                      <span class="c1"># figure filename (and/or shape filename)</span>
<span class="n">tables</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;tblSST_AVHRR_OI_NRT&#39;</span><span class="p">,</span> <span class="s1">&#39;tblDarwin_Plankton_Climatology&#39;</span><span class="p">]</span>    <span class="c1"># list of varaible table names</span>
<span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sst&#39;</span><span class="p">,</span> <span class="s1">&#39;diazotroph_c10_darwin_clim&#39;</span><span class="p">]</span>                     <span class="c1"># list of variable names</span>
<span class="n">spatialTolerance</span> <span class="o">=</span> <span class="mf">0.3</span>                                                <span class="c1"># colocalizer spatial tolerance (+/- degrees)</span>
<span class="n">exportDataFlag</span> <span class="o">=</span> <span class="kc">False</span>                                                <span class="c1"># export the cruise trajectory and colocalized data on disk</span>
<span class="n">depth1</span> <span class="o">=</span> <span class="mi">0</span>                                                            <span class="c1"># depth range start (m)</span>
<span class="n">depth2</span> <span class="o">=</span> <span class="mi">5</span>                                                            <span class="c1"># depth range end (m)</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">LAG</span><span class="o">.</span><span class="n">propagate</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">endDate</span><span class="p">,</span> <span class="n">lat0</span><span class="p">,</span> <span class="n">lon0</span><span class="p">,</span> <span class="n">fmt</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
<span class="n">LAG</span><span class="o">.</span><span class="n">plotAlongTrack</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">fmt</span><span class="p">,</span> <span class="n">tables</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">spatialTolerance</span><span class="p">,</span> <span class="n">depth1</span><span class="p">,</span> <span class="n">depth2</span><span class="p">,</span> <span class="n">exportDataFlag</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">msize</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">clr</span><span class="o">=</span><span class="s1">&#39;darkturquoise&#39;</span><span class="p">)</span>
</pre></div>
</div>
<iframe src="../../../_static/tutorial_plots/Tracer.html"  frameborder = 0  height="1000px" width="100%">></iframe></div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 
      <span class="lastupdated">
        Last updated on Jul 06, 2020.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>